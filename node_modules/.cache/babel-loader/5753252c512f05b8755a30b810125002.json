{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kaci\\\\Desktop\\\\react-czat-firebase\\\\react-chat-firebase\\\\src\\\\components\\\\ChatInput.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { db } from \"../firebase/firebase\";\nimport 'firebase/firestore';\nimport firebase from 'firebase/app';\nimport { useStateValue } from '../Context-Reducer/StateProvider';\nimport SendIcon from '@material-ui/icons/Send';\nimport 'emoji-mart/css/emoji-mart.css';\nimport { Picker } from \"emoji-mart\";\nimport { firebaseApp } from \"../firebase/firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ChatInput = ({\n  channelName,\n  channelId\n}) => {\n  _s();\n\n  const [input, setInput] = useState('');\n  const [{\n    user\n  }, dispatch] = useStateValue();\n  const [emojiVisible, setEmojiVisible] = useState(false);\n  const [fileUrl, setFileUrl] = useState(false);\n\n  const sendMessage = e => {\n    e.preventDefault();\n\n    if (channelId) {\n      db.collection('rooms').doc(channelId).collection('messages').add({\n        message: input,\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n        username: user.displayName,\n        userimage: user.photoURL,\n        file: fileUrl\n      });\n    }\n\n    setInput('');\n  };\n\n  const addEmoji = e => {\n    let emoji = e.native;\n    setInput(input + emoji);\n  };\n\n  const showEmojis = () => {\n    setEmojiVisible(prevState => !prevState);\n  };\n\n  const selectFile = async e => {\n    const file = e.target.files[0];\n    const storageRef = firebaseApp.storage().ref();\n\n    if (file === undefined) {\n      setFileUrl(false);\n    } else {\n      const fileRef = storageRef.child(file.name);\n      await fileRef.put(file);\n      setFileUrl(await fileRef.getDownloadURL());\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat__input\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat__input__\",\n        style: {\n          marginTop: 10,\n          display: 'flex',\n          alignItems: 'center',\n          width: '100%',\n          padding: '0 16px',\n          justifyContent: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          onChange: e => setInput(e.target.value),\n          value: input,\n          placeholder: \"Wpisz wiadomo\\u015B\\u0107\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            borderTop: '2px solid #355c7d',\n            borderRight: '2px solid #355c7d',\n            borderBottom: '2px solid #355c7d',\n            borderRadius: '0 20px 20px 0',\n            display: 'flex',\n            alignItems: 'center',\n            paddingRight: 10,\n            margin: '0 10px 0 0',\n            height: '5.2vh',\n            cursor: \"pointer\",\n            background: 'white'\n          },\n          onClick: showEmojis,\n          children: String.fromCodePoint(0x1f600)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: /*#__PURE__*/_jsxDEV(SendIcon, {\n            className: \"chat__input__sendicon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"file__input\",\n        type: \"file\",\n        onChange: selectFile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      style: emojiVisible ? {\n        position: \"absolute\",\n        bottom: 120,\n        right: 0,\n        cssFloat: \"right\",\n        marginLeft: \"200px\"\n      } : {\n        display: 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(Picker, {\n        onSelect: addEmoji,\n        emojiTooltip: true,\n        set: \"apple\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ChatInput, \"cctavVMs2Mn0RcfnwlXEiwqrRv0=\", false, function () {\n  return [useStateValue];\n});\n\n_c = ChatInput;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatInput\");","map":{"version":3,"sources":["C:/Users/Kaci/Desktop/react-czat-firebase/react-chat-firebase/src/components/ChatInput.js"],"names":["React","useState","db","firebase","useStateValue","SendIcon","Picker","firebaseApp","ChatInput","channelName","channelId","input","setInput","user","dispatch","emojiVisible","setEmojiVisible","fileUrl","setFileUrl","sendMessage","e","preventDefault","collection","doc","add","message","timestamp","firestore","FieldValue","serverTimestamp","username","displayName","userimage","photoURL","file","addEmoji","emoji","native","showEmojis","prevState","selectFile","target","files","storageRef","storage","ref","undefined","fileRef","child","name","put","getDownloadURL","marginTop","display","alignItems","width","padding","justifyContent","value","borderTop","borderRight","borderBottom","borderRadius","paddingRight","margin","height","cursor","background","String","fromCodePoint","position","bottom","right","cssFloat","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport {db} from \"../firebase/firebase\";\r\nimport 'firebase/firestore';\r\nimport firebase from 'firebase/app';\r\nimport {useStateValue} from '../Context-Reducer/StateProvider'\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { Picker } from \"emoji-mart\";\r\nimport { firebaseApp } from \"../firebase/firebase\";\r\n\r\n\r\nexport const ChatInput = ({ channelName, channelId }) => {\r\n    const [input, setInput] = useState('');\r\n    const [{user}, dispatch] = useStateValue();\r\n    const [emojiVisible, setEmojiVisible] = useState(false);\r\n    const [fileUrl, setFileUrl] = useState(false)\r\n\r\n    const sendMessage = (e) => {\r\n        e.preventDefault();\r\n        if (channelId) {\r\n            db.collection('rooms')\r\n                .doc(channelId)\r\n                .collection('messages')\r\n                .add({\r\n                    message: input,\r\n                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n                    username: user.displayName,\r\n                    userimage: user.photoURL,\r\n                    file: fileUrl\r\n                })\r\n\r\n        }\r\n        setInput('')\r\n\r\n    }\r\n\r\n    const addEmoji = e => {\r\n        let emoji = (e.native);\r\n\r\n        setInput(input + emoji)\r\n    }\r\n\r\n    const showEmojis = () => {\r\n        setEmojiVisible(prevState => !prevState)\r\n    }\r\n    const selectFile = async e => {\r\n        const file = e.target.files[0];\r\n\r\n        const storageRef = firebaseApp.storage().ref();\r\n\r\n        if (file === undefined) {\r\n            setFileUrl(false)\r\n        }\r\n        else {\r\n            const fileRef = storageRef.child(file.name);\r\n\r\n            await fileRef.put(file)\r\n            setFileUrl(await fileRef.getDownloadURL())\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className='chat__input'>\r\n            <form onSubmit={sendMessage}>\r\n                <div className='chat__input__' style={{marginTop: 10,\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    width: '100%',\r\n                    padding: '0 16px',\r\n                    justifyContent: 'center'}}>\r\n                    <input\r\n                        type='text'\r\n                        onChange={(e) => setInput(e.target.value)}\r\n                        value={input}\r\n                        placeholder='Wpisz wiadomość' />\r\n                    <span\r\n                        style={{\r\n                            borderTop: '2px solid #355c7d',\r\n                            borderRight: '2px solid #355c7d',\r\n                            borderBottom: '2px solid #355c7d',\r\n                            borderRadius: '0 20px 20px 0',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            paddingRight: 10,\r\n                            margin: '0 10px 0 0',\r\n                            height: '5.2vh',\r\n                            cursor: \"pointer\",\r\n                            background: 'white'}}\r\n                        onClick={showEmojis}>\r\n                       {String.fromCodePoint(0x1f600)}\r\n                   </span>\r\n                    <button type='submit'>\r\n                        <SendIcon className='chat__input__sendicon'/>\r\n                    </button>\r\n                </div>\r\n                <input id=\"file__input\"\r\n                       type=\"file\"\r\n                       onChange={selectFile}\r\n                />\r\n            </form>\r\n\r\n            <span style={emojiVisible ?{\r\n                    position: \"absolute\",\r\n                    bottom: 120,\r\n                    right: 0,\r\n                    cssFloat: \"right\",\r\n                    marginLeft: \"200px\"\r\n                } :\r\n                {\r\n                    display: 'none'\r\n                }}>\r\n                    <Picker\r\n                        onSelect={addEmoji}\r\n                        emojiTooltip={true}\r\n                        set='apple'/>\r\n                </span>\r\n\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}